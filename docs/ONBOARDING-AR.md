> ูุฐุง ุงูููู ูู ุงููุณุฎุฉ ุงูุนุฑุจูุฉ ูู docs/ONBOARDING.md
> ูุงููุณุฎุชุงู ูุชูุงูุฆุชุงู ูู ุญูุซ ุงููุญุชูู ูุงููุนูู.

# ุฏููู ุจุฏุก ุงูุนูู (Onboarding Guide)

**ุงููุดุฑูุน:** ููุญุฉ ุชุญูู ุงูุฅุฏุงุฑุฉ (Admin Control Panel)
**ุงูุญุงูุฉ:** ุงููุถุน ุงูุญุงูู โ Infrastructure-First
**ุงูุชูููุฉ:** PHP 8.2 (Slim Framework) + Twig + MySQL
**ุงูุฌูููุฑ ุงููุณุชูุฏู:** ูุทูุฑู Backend ู Frontend (Twig)

---

## 1๏ธโฃ ูุธุฑุฉ ุชูููุฐูุฉ ุณุฑูุนุฉ

ูุฐุง ุงููุดุฑูุน ูู **ูุธุงู ุฅุฏุงุฑุฉ ุฅุฏุงุฑู ูุนุชูุฏ ุนูู ุงูู Backend ุจุดูู ุฃุณุงุณู**
ููุจูู ููู ูุจุฏุฃ **Security-First / Zero-Trust Architecture**.

ูุฐุง **ููุณ** ูุดุฑูุน ูุงุฌูุงุช (UI-First)
ููุง ูุดุฑูุน Features ุณุฑูุนุฉ.

---

### ูุง ูู ูุฐุง ุงููุดุฑูุนุ

ูุธุงู ุฅุฏุงุฑุฉ ูุฑูุฒู ูุตูู ููุนูู ูู ุจูุฆุงุช ุญุณุงุณุฉ
(ูุงููุฉ โ ูุคุณุณูุฉ โ ุฃูุธูุฉ ุฏุงุฎููุฉ)ุ ููุนุชูุฏ ุนูู:

* Zero-Trust (ูุง ุซูุฉ ุถูููุฉ ุจุนุฏ ุชุณุฌูู ุงูุฏุฎูู)
* ุทุจูุงุช Middleware ูุชุนุฏุฏุฉ
* Sessions ุจุฅุฏุงุฑุฉ Server-Side ููุท
* Step-Up Authentication ููุนูููุงุช ุงูุญุณุงุณุฉ
* Audit ุฅูุฒุงูู ููู ุงูุนูููุงุช ุงูุฅุฏุงุฑูุฉ ุงููููุฉ

---

### โ๏ธ ุชุญุฐูุฑ ููู ุฌุฏูุง

> ุฃู ุชุนุฏูู ูุชู ุจุฏูู ููู ูุงูู ููุฐุง ุงูุฏููู
> ููุนุฏ **ูุฎุงุทุฑุฉ ุฃูููุฉ ุนุงููุฉ**.
>
> ุงูุชุนููุฏ ุงูููุฌูุฏ ูู ุงููุธุงู **ููุตูุฏ**
> ููุง ูุฌุจ ูุญุงููุฉ โุชุจุณูุทูโ ุฃู ุงูุงูุชูุงู ุนููู.

---

## 2๏ธโฃ ุทุฑููุฉ ุงูุนูู ูุน GitHub

ููุญูุงุธ ุนูู ุงุณุชูุฑุงุฑ ุงููุธุงู ูุฃูุงููุ ูุฌุจ ุงูุงูุชุฒุงู ุจูุฐู ุงูููุงุนุฏ:

### 1. Clone ุงููุดุฑูุน

```bash
git clone <repository-url>
```

### 2. ุณูุงุณุฉ ุงููุฑูุน (Branching)

* ููุฒุงุช ุฌุฏูุฏุฉ:
  `feature/your-feature-name`
* ุฅุตูุงุญุงุช:
  `fix/issue-description`

### 3. ุงูุณุญุจ ุงูุขูู ููุชุญุฏูุซุงุช

```bash
git pull origin main --rebase
```

### 4. ููููุน ุชูุงููุง

* โ Push ูุจุงุดุฑ ุนูู `main`
* โ Merge ุจุฏูู ูุฑุงุฌุนุฉ

### 5. ุชุงุฑูุฎ ูุธูู (Clean History)

* Squash ูุจู ุงูุฏูุฌ
* Git history ูุธูู = Debug ุฃุณูู + Audit ุฃูุถุญ

---

## 3๏ธโฃ ุชุดุบูู ุงููุดุฑูุน ูุญูููุง

### ุงููุชุทูุจุงุช

* PHP 8.2 ุฃู ุฃุญุฏุซ
* Extensions:

    * pdo
    * openssl
    * redis
    * mbstring
* Composer

---

### ุฎุทูุงุช ุงูุชุดุบูู

#### 1๏ธโฃ ุชุซุจูุช ุงูุงุนุชูุงุฏุงุช

```bash
composer install
```

---

#### 2๏ธโฃ ุฅุนุฏุงุฏ ููู ุงูุจูุฆุฉ (.env)

* ุงูุณุฎ:

  ```
  .env.example โ .env
  ```
* ุนุฏูู ุจูุงูุงุช ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช ููุท.

---

### ๐ ููุงุญุธุฉ ุฃูููุฉ ุจุฎุตูุต ููุงุชูุญ ุงูุชุดููุฑ

```
ูุฌุจ ุชูููุฏ ููุงุชูุญ ุงูุชุดููุฑ ุจุงุณุชุฎุฏุงู ูููุฏ ุนุดูุงุฆู ุขูู (CSPRNG).
โ ููููุน ุงุณุชุฎุฏุงู ูููุงุช ูุฑูุฑ ุฃู ูุตูุต ูุฏููุฉ.
ูู ุญุงู ุงูุดูุ ุงุณุฃู ุงููุฑูู ุงูุฃุณุงุณู.
```

---

## 4๏ธโฃ ุฅุนุฏุงุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช (ุงุณุชูุฑุงุฏ SQL) โ **ุฅุฌุจุงุฑู**

ูุจู ุชุดุบูู ุงููุธุงูุ ูุฌุจ **ุฅูุดุงุก ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุงุณุชูุฑุงุฏ ุงูู Schema**.

### ููู ุงูู SQL

* ุงููุดุฑูุน ูุญุชูู ุนูู ููู SQL ุฑุณูู
* ุงูููู ูุญุชูู ุนูู:

    * ุงูุฌุฏุงูู
    * ุงููููุฏ
    * ุงูููุงุฑุณ (Indexes)
* ุงูููู ูุง ูุญุชูู ุนูู:

    * ุฃู Admin ุงูุชุฑุงุถู
    * ุฃู ุจูุงูุงุช ุชุฌุฑูุจูุฉ
    * ุฃู ุญุณุงุจุงุช ุฌุงูุฒุฉ

---

### ุทุฑู ุงูุงุณุชูุฑุงุฏ

#### ุนุจุฑ phpMyAdmin

1. ุฃูุดุฆ ูุงุนุฏุฉ ุจูุงูุงุช ุฌุฏูุฏุฉ (ูุซู: `admin_control_panel`)
2. ุงูุชุญ phpMyAdmin
3. ุงุฎุชุฑ ูุงุนุฏุฉ ุงูุจูุงูุงุช
4. Import
5. ุงุฎุชุฑ ููู ุงูู `.sql`
6. Execute

#### ุนุจุฑ ุณุทุฑ ุงูุฃูุงูุฑ (ุงุฎุชูุงุฑู)

```bash
mysql -u USER -p DB_NAME < schema.sql
```

---

### ๐ ููุงุญุธุฉ ูููุฉ

ุจุนุฏ ุงูุงุณุชูุฑุงุฏ:

* ูุงุนุฏุฉ ุงูุจูุงูุงุช ุณุชููู **ูุงุฑุบุฉ ูู ุฃู Admin**
* ุงููุธุงู ุณูุจูู ูู ูุถุน **LOCKED**
* ูุฐุง ุงูุณููู **ุทุจูุนู ููุชููุน** ูููุณ ุฎุทุฃ

---

## 5๏ธโฃ ุฅูุดุงุก ุฃูู Admin (Bootstrap) โ **ุฎุทูุฉ ุญุฑุฌุฉ**

> โ๏ธ ุฃูู ุฎุทูุฉ ูู ุงููุธุงู ุจุงููุงูู

ุงููุธุงู ูุจุฏุฃ ุฏุงุฆููุง ูู ุงูุญุงูุฉ ุงูุชุงููุฉ:

```
BOOTSTRAP_REQUIRED
```

* โ ูุง ููุฌุฏ Admin ุงูุชุฑุงุถู
* โ ูุง ููุฌุฏ Register API
* โ ูุง ููุณูุญ ุจุฅูุดุงุก Admin ุนุจุฑ SQL

---

### ุงูุทุฑููุฉ ุงูุตุญูุญุฉ ุงููุญูุฏุฉ

#### 1๏ธโฃ ุชูููุฏ Bootstrap Token (ุนู ุทุฑูู CLI)

* ููุฌุฏ ุฃูุฑ CLI ูุฎุตุต ุฏุงุฎู ุงููุดุฑูุน
* ูุฐุง ุงูุฃูุฑ:

    * ููููุฏ Token ููุณุชุฎุฏู ูุฑุฉ ูุงุญุฏุฉ
    * ูุญุฏุฏ ูู ูุฏุฉ ุตูุงุญูุฉ (TTL)
    * ูุญูุธ Hash ููุท ุฏุงุฎู ูุงุนุฏุฉ ุงูุจูุงูุงุช

> ูุง ุชุญุงูู ุชุฎููู ุฃู ุชูุฑุงุฑ ูุฐุง ุงูุฃูุฑ ุจุฏูู ุงูุฑุฌูุน ูููุฑูู ุงูุฃุณุงุณู.

**ููุทูุฑู ุงููุงุฌูุงุช:**
ูุณุช ูุทุงูุจูุง ุจุชูููุฐ ูุฐู ุงูุฎุทูุฉุ ููุท ูุนุฑูุฉ ุฃููุง ุชุชู ูุฑุฉ ูุงุญุฏุฉ.

---

#### 2๏ธโฃ ุงุณุชุฎุฏุงู ุงูุชููู ูู ุฎูุงู ุงููุชุตูุญ

1. ุงูุชุญ:

   ```
   http://localhost:8080
   ```
2. ุณุชุธูุฑ ุตูุญุฉ ุชุทูุจ **Bootstrap Token**
3. ุฃุฏุฎู ุงูุชููู ุงูุฐู ุชู ุชูููุฏู ูู CLI

---

#### 3๏ธโฃ ุฅูุดุงุก ุฃูู Admin

ุจุนุฏ ูุจูู ุงูุชููู:

* ุฅุฏุฎุงู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ููููุฉ ุงููุฑูุฑ
* ูุชู ุชุนููู Role ุซุงุจุช (`system.owner`)
* ุชูุนูู ุงูุชุญูู ุงูุซูุงุฆู (TOTP) **ุฅุฌุจุงุฑู**

ุจุนุฏ ุงูุฅููุงู:

* ุงูุชููู ูููุบู ููุงุฆููุง
* ุงููุธุงู ููุชูู ูู:

```
LOCKED โ ACTIVE
```

---

### โ ุชุญุฐูุฑ ุฎุทูุฑ

```
ุฅุถุงูุฉ Admin ูุฏูููุง ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุชูุนุชุจุฑ Backdoor
ูุณูุชู ุงูุชุดุงููุง ุนุจุฑ ุฃูุธูุฉ Audit ู Guards.
```

---

## 6๏ธโฃ ุงูุฏุฎูู ุนูู ูุงุนุฏุฉ ุงูุจูุงูุงุช (phpMyAdmin)

### ุงูุฌุฏุงูู ุงููููุฉ

* `admins`
* `identifiers`
* `sessions`
* `audit_outbox`

### โ ูุงุนุฏุฉ ุฐูุจูุฉ

```
ุฃู ุชุนุฏูู ูุฏูู ูู ุงูุฌุฏุงูู ุงูุฃูููุฉ ููุนุชุจุฑ Tampering.
ุงููุธุงู ูุฏ:
- ููุณูุท ุงูุฌูุณุงุช
- ูููุน ุงููุตูู
- ูุณุฌู ุญุฏุซ ุฃููู ุฎุทูุฑ ูู ุงูู Audit
```

---

## 7๏ธโฃ ุงูู Endpoints ุงููุชุงุญุฉ ุญุงูููุง (ููุท ูุฐู)

### ุงููุตุงุฏูุฉ (Auth)

```
POST /auth/login
POST /auth/logout
POST /auth/totp/verify
```

### Admins

```
GET  /admins
POST /admins
PUT  /admins/{id}
```

### Sessions

```
GET  /sessions
POST /sessions/{id}/revoke
```

๐ ููุงุญุธุงุช:

* ุฃู Endpoint ุบูุฑ ูุฐููุฑ ููุง = ุบูุฑ ูุชุงุญ
* ูุฐู ููุณุช Contract ููุงุฆูุฉ ูููุงุฌูุฉ

---

## 8๏ธโฃ Frontend & Twig โ ููุงุนุฏ ุงูุนูู ุงูุขูู

### ููุงู ูููุงุช ุงููุงุฌูุฉ

```
templates/
```

### ููุงุนุฏ ุตุงุฑูุฉ

1. Controller โ View
2. โ ูุง ููุทู ุฃููู ุฏุงุฎู Twig
3. ุงุณุชุฎุฏู Escape ุฏุงุฆููุง:

   ```twig
   {{ value|e }}
   ```
4. ุงุณุชุฎุฏู ููุงุชูุญ ุงูุชุฑุฌูุฉ ููุท
5. ูุง ุชูุชุฑุถ ูุฌูุฏ ุฃู ุชุฑุชูุจ ุงูุญููู ุฏุงุฎู DTOs

---

## 9๏ธโฃ ุงูููุงุนุฏ ุงูุฐูุจูุฉ ููู ุงููุทูุฑูู

1. โ ูุง ุชูุชุจ ููุทู Auth ูุฏูู
2. โ ูุง ุชุบููุฑ ูุนูู ุงูุตูุงุญูุงุช
3. โ Session โ Identity
4. โ ูุง ุชุนุฑุถ `admin_id` ูู ุงููุงุฌูุฉ
5. โ ุนูุฏ ุงูุดู โ ุงุณุฃู

---

## ๐ ุญุฏูุฏ ุงููุฑุญูุฉ ุงูุญุงููุฉ

### **Infrastructure & Core Security**

**ุชู ุชูููุฐู**

* Login
* Sessions
* TOTP / Step-Up Authentication
* Transactional Audit Outbox

**ุบูุฑ ูุณููุญ ุญุงูููุง**

* Business Logic
* Features ุฎุงุตุฉ ุจุงูููุชุฌ ุงูููุงุฆู

---

## โ๏ธ ููุงุญุธุฉ ูููุฉ ููุทูุฑู ุงููุงุฌูุงุช ุจุฎุตูุต `.env`

ููู `.env` ูุญุชูู ุนูู ุฅุนุฏุงุฏุงุช ุญุณุงุณุฉ.

ููุทูุฑ ูุงุฌูุงุช:

* ุนุฏูู ุฅุนุฏุงุฏุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช ููุท
* โ ูุง ุชุบููุฑ ููุงุชูุญ ุงูุชุดููุฑ
* โ ูุง ุชูุนูู Recovery ุฃู ุฃู Security Flags

ูู ุญุงู ุญุฏูุซ ูุดููุฉุ ุชูุงุตู ูุน ุงููุฑูู ุงูุฃุณุงุณู.

---

## ๐ ุงูุฎุงุชูุฉ

ูุฐุง ุงูููู ูู **ุงููุฑุฌุน ุงููุญูุฏ ูุชุดุบูู ุงููุดุฑูุน**.

* ุฃู ุชุนุงุฑุถ โ ูุฐุง ุงูููู ูู ุงูุตุญูุญ
* ุฃู ุทูุจ ุชุทููุฑ โ ุฎุงุฑุฌ ูุฐุง ุงูุฏููู

**ุงุดุชุบู ุจูุฏูุก ูุญุฐุฑุ ูุงููุธุงู ููุดุชุบู ูุนุงู ๐**

---
