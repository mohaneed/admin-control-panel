# ุฏููู ุจุฏุก ุงูุนูู โ ูุชูุงูู ูุน ุงููุงูุน (Reality Aligned)

**ุงููุดุฑูุน:** ููุญุฉ ุชุญูู ุงูุฅุฏุงุฑุฉ (Admin Control Panel)
**ุงูุญุงูุฉ:** ุงููุถุน ุงูุญุงูู โ Infrastructure-First
**ุงูุชูููุฉ:** PHP 8.2 (Slim Framework) + Twig + MySQL
**ุงูุฌูููุฑ ุงููุณุชูุฏู:** ูุทูุฑู ุงูู Backend ููุทูุฑู ุงููุงุฌูุฉ (Twig)

---

## 1๏ธโฃ ูุธุฑุฉ ุชูููุฐูุฉ ุนุงูุฉ

ูุฐุง ุงููุดุฑูุน ูู **ูุธุงู ุฅุฏุงุฑุฉ ุฅุฏุงุฑู ูุนุชูุฏ ุนูู ุงูู Backend ุจุดูู ุฃุณุงุณู**
ููุจูู ููู ูุจุฏุฃ **Security-First / Zero-Trust**.

ูุฐุง **ููุณ** ูุดุฑูุนูุง ููุฌูููุง ูููุงุฌูุฉ ุฃู ููููุฒุงุช ุงูุณุฑูุนุฉ.

### ูุง ูู ูุฐุง ุงููุดุฑูุนุ

ูุธุงู ุฅุฏุงุฑุฉ ูุฑูุฒู ูุฎุตุต ูุจูุฆุงุช ุญุณุงุณุฉ
(ูุงููุฉุ ูุคุณุณูุฉุ ุฃูุธูุฉ ุฏุงุฎููุฉ)ุ ููุนุชูุฏ ุนูู:

* Zero-Trust (ูุง ุชูุฌุฏ ุซูุฉ ุถูููุฉ ุจุนุฏ ุชุณุฌูู ุงูุฏุฎูู)
* ุณูุณูุฉ Middleware ูุชุนุฏุฏุฉ ุงูุทุจูุงุช
* ุณูุทุฑุฉ ูุงููุฉ ููุฎุงุฏู ุนูู ุงูุฌูุณุงุช
* Step-Up Authentication ููุนูููุงุช ุงูุญุณุงุณุฉ
* ุชุณุฌูู Audit ุฅูุฒุงูู ููู ุงูุนูููุงุช ุงูุญุฑุฌุฉ

### โ๏ธ ุชุญุฐูุฑ ููู

> ุฃู ุชุนุฏูู ูุชู ุฏูู ููู ูุงูู ููุฐุง ุงูููู
> ููุนุฑูุถ ุงููุธุงู **ููุฎุงุทุฑ ุฃูููุฉ ุนุงููุฉ**.
>
> ุงูุชุนููุฏ ุงูููุฌูุฏ ูู ุงููุธุงู **ููุตูุฏ**.
> ูุง ุชุญุงูู โุชุจุณูุทูโ ุฃู ุชุฌุงูุฒ ุขููุงุชู.

---

## 2๏ธโฃ ุขููุฉ ุงูุนูู ุนูู GitHub

ููุญูุงุธ ุนูู ุงุณุชูุฑุงุฑ ุงููุธุงู ููุงุจููุชู ูููุฑุงุฌุนุฉ:

1. **ุงููุณุฎ (Clone)**

```bash
git clone <repository-url>
```

2. **ุณูุงุณุฉ ุงููุฑูุน**

* ุงูููุฒุงุช: `feature/your-feature-name`
* ุงูุฅุตูุงุญุงุช: `fix/issue-description`

3. **ุงูุณุญุจ ุงูุขูู**

```bash
git pull origin main --rebase
```

4. **ููููุน ุชูุงููุง**

* โ ุงูุฏูุน ุงููุจุงุดุฑ ุนูู `main`
* โ ุงูุฏูุฌ ุจุฏูู ูุฑุงุฌุนุฉ

5. **ุชุงุฑูุฎ ูุธูู**

* ุฏูุฌ ุงูููููุชุงุช (Squash) ูุจู ุงูุฏูุฌ
* ุชุงุฑูุฎ Git ูุธูู = ูุฑุงุฌุนุฉ ูุชุตุญูุญ ุฃุณูู

---

## 3๏ธโฃ ุงูุฅุนุฏุงุฏ ุงููุญูู

### ุงููุชุทูุจุงุช

* PHP 8.2 ุฃู ุฃุญุฏุซ
* ุงูุฅุถุงูุงุช:

  * pdo
  * openssl
  * redis
  * mbstring
  * readline
  * json
  * intl
* Composer

---

### ุฎุทูุงุช ุงูุฅุนุฏุงุฏ

#### 1๏ธโฃ ุชุซุจูุช ุงูุงุนุชูุงุฏูุงุช

```bash
composer install
```

#### 2๏ธโฃ ุฅุนุฏุงุฏ ุงูุจูุฆุฉ

* ุงูุณุฎ ุงูููู:

  ```
  .env.example โ .env
  ```

* ุงุถุจุท ุจูุงูุงุช ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช
  (`DB_HOST`, `DB_NAME`, `DB_USER`, `DB_PASS`)

* **ููุงุชูุญ ุฃูููุฉ ุญุฑุฌุฉ:**

  ุงููุธุงู ูุญุชุงุฌ ููุงุชูุญ ุชุดููุฑ ูุญุฏุฏุฉ ููุนูู:
  (`ENCRYPTION_KEY`, `EMAIL_BLIND_INDEX_KEY`, `PASSWORD_PEPPER`)

  > **ูุทูุฑู ุงููุงุฌูุฉ:** ููููุน ุชุนุฏูู ูุฐู ุงูููุงุชูุญ.
  >
  > **ูุทูุฑู ุงูู Backend:** ุงุณุชุฎุฏู ูููุฏ ุนุดูุงุฆู ุขูู (CSPRNG)ุ
  > ูุงุฑุฌุน ูููุฑูู ุงูุฃุณุงุณู/ุงูุฃููู ูุชุญุฏูุฏ ุงูุทูู ูุงูุตูุบุฉ ุงูุตุญูุญุฉ.

---

## 4๏ธโฃ ุฅุนุฏุงุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช (ุงุณุชูุฑุงุฏ SQL) โ **ุฅุฌุจุงุฑู**

ูุจู ุชุดุบูู ุงููุธุงู ูุฌุจ ุฅูุดุงุก ูุชููุฆุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช.

### ููู ุงููุฎุทุท (Schema)

* ุงููุณุงุฑ: `database/schema.sql`
* ูุญุชูู ุนูู:

  * ุงูุฌุฏุงูู
  * ุงููููุฏ
  * ุงูููุงุฑุณ
* ูุง ูุญุชูู ุนูู:

  * ุฃู ุญุณุงุจุงุช Admin
  * ุฃู ุจูุงูุงุช ุชุฌุฑูุจูุฉ

---

### ุฃูุฑ ุงูุงุณุชูุฑุงุฏ

```bash
mysql -u USER -p DB_NAME < database/schema.sql
```

### ๐ ููุงุญุธุฉ ูููุฉ

ุจุนุฏ ุงูุงุณุชูุฑุงุฏ:

* ูู ููุฌุฏ ุฃู ูุณุชุฎุฏู Admin
* ูุงุนุฏุฉ ุจูุงูุงุช ูุงุฑุบุฉ **ุฃูุฑ ูุชููุน ูุตุญูุญ**

---

## 5๏ธโฃ ุฅูุดุงุก ุฃูู Admin (Bootstrap) โ **ุงูุฃูู**

> โ๏ธ ูุฐู ุฃูู ุฎุทูุฉ ูู ุฅุนุฏุงุฏ ุฃู ุจูุฆุฉ ุฌุฏูุฏุฉ.

ุงููุธุงู **ูุง ูุญุชูู** ุนูู ูุงุฌูุฉ ููุจ ููุชุณุฌูู ุฃู ููุชููุฆุฉ ุงูุฃููู.

### ุงูุทุฑููุฉ ุงููุญูุฏุฉ ุงูุตุญูุญุฉ

#### 1๏ธโฃ ุชุดุบูู ุณูุฑุจุช ุงูุชููุฆุฉ (CLI)

```bash
php scripts/bootstrap_admin.php
```

#### 2๏ธโฃ ุงุชุจุงุน ุงูุชุนูููุงุช

1. ุงูุณูุฑุจุช ูุชุญูู ุฃูู ูุง ููุฌุฏ ุฃู Admin.
2. ุฅุฏุฎุงู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ููููุฉ ุงููุฑูุฑ ูุฃูู Admin.
3. ูุชู ุชูููุฏ **TOTP Secret** ูุนุฑุถู.
4. ุฅุนุฏุงุฏ ุชุทุจูู ุงููุตุงุฏูุฉ (Google Authenticator / Authy).
5. ุฅุฏุฎุงู ููุฏ OTP ููุชุญูู.
6. ุนูุฏ ุงููุฌุงุญ:

  * ูุชู ุฅูุดุงุก Admin
  * ูุชู ุงุนุชุจุงุฑ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ููุชุญูููุง ููู

### โ๏ธ ุชุญุฐูุฑ ุฃููู

> ุชุดุบูู ูุฐุง ุงูุณูุฑุจุช ุฃูุซุฑ ูู ูุฑุฉ ููุนุฏ **ูุฎุงููุฉ ุฃูููุฉ**.
> ุงูุณูุฑุจุช ูุชููู ุชููุงุฆููุง ุฅุฐุง ููุฌุฏ ุฃู Admin.
> ููููุน ุชูุงููุง ูุญุงููุฉ ุชุฌุงูุฒ ูุฐุง ุงูุณููู.

---

## 6๏ธโฃ ุชุดุบูู ุงูุฎุงุฏู ูุญูููุง

ูุชุดุบูู ุฎุงุฏู ุงูุชุทููุฑ:

```bash
php -S 0.0.0.0:8080 -t public
```

* ุงููุตูู ุนุจุฑ: `http://localhost:8080`
* ูุฎุตุต **ููุชุทููุฑ ุงููุญูู ููุท**
* ูุชุทูุจ PHP 8.2+

---

## 7๏ธโฃ ุงููุณุงุฑุงุช ุงููุชุงุญุฉ ุญุงูููุง

ููุญุตูู ุนูู ุงููุงุฆูุฉ ุงูุฑุณููุฉ ูููุณุงุฑุงุช ุงููุชุงุญุฉุ ูุฑุฌู ุงูุฑุฌูุน ุฅูู:

1. **`docs/API.md`** โ ุงูุนูุฏ ุงูุฑุณูู ููู API (Canonical Contract).
2. **`routes/web.php`** โ ุงูุชูููุฐ ุงูุนููู ูุชููุฆุฉ ุงููุณุงุฑุงุช.

๐ **ููุงุญุธุฉ:** `docs/API.md` ูู **ุงููุตุฏุฑ ุงูุฑุณูู ููุญูููุฉ**. ุฃู ููุทุฉ ููุงูุฉ (Endpoint) ุบูุฑ ููุซูุฉ ููู ุชุนุชุจุฑ ุบูุฑ ูุชุงุญุฉุ ุจุบุถ ุงููุธุฑ ุนูุง ูู ููุฌูุฏ ูู `routes/web.php`.

---

## 8๏ธโฃ ุงููุงุฌูุฉ ู Twig โ ููุงุนุฏ ุงูุงุณุชุฎุฏุงู ุงูุขูู

### ููุงู ุงูููุงูุจ

```
templates/
```

### ููุงุนุฏ ุตุงุฑูุฉ

1. Controller โ View

2. โ ููููุน ููุทู ุฃููู ุฏุงุฎู Twig

3. ูุฌุจ ุฏุงุฆููุง ุงููุฑูุจ (Escape):

   ```twig
   {{ value|e }}
   ```

4. ุงุณุชุฎุฏุงู ููุงุชูุญ ุงูุชุฑุฌูุฉ ููุท

5. ูุง ุชูุชุฑุถ ุชุฑุชูุจ ุฃู ูุฌูุฏ ุญููู DTO

### ููุงุญุธุงุช ูููุงุฌูุฉ

* **ูุง ุชูุฌุฏ ูุงุฌูุฉ ุชุดุบูู ุฃููู:**
  ุงููุงุฌูุฉ ุชูุชุฑุถ ุฃู ุงูุชููุฆุฉ (CLI) ุชูุช ุจุงููุนู.
* **ุงูุญุงูุฉ:**
  ูุง ุชูุชุฑุถ ุญุงูุฉ ูุนููุฉ ูููุธุงูุ ูุชุนุงูู ูุน ุฃุฎุทุงุก 401/403 ุจุดูู ุณููู.

---

## 9๏ธโฃ ุงูููุงุนุฏ ุงูุฐูุจูุฉ ูุฌููุน ุงููุทูุฑูู

1. โ ูุง ููุทู Auth ูุฏูู
2. โ ูุง ุชุบููุฑ ูู ููุทู ุงูุตูุงุญูุงุช
3. โ ุงูุฌูุณุฉ โ ุงููููุฉ
4. โ ููููุน ุฅุธูุงุฑ `admin_id` ูู ุงููุงุฌูุฉ
5. โ ุนูุฏ ุงูุดู โ ุงุณุฃู

---

## ๐ ุญุฏูุฏ ุงููุฑุญูุฉ ุงูุญุงููุฉ

### **ุงูุจููุฉ ุงูุชุญุชูุฉ ูุงูุฃูู ุงูุฃุณุงุณู**

**ููุชูู**

* ุชุณุฌูู ุงูุฏุฎูู
* ุงูุฌูุณุงุช
* TOTP / Step-Up Authentication
* Transactional Audit Outbox
* ุจููุฉ ุงูุฅุดุนุงุฑุงุช

**ุบูุฑ ูุณููุญ ุจุนุฏ**

* ููุทู ุชุฌุงุฑู ุฎุงุฑุฌ ุฅุฏุงุฑุฉ ุงููุฏุฑุงุก
* ููุฒุงุช ุฎุงุตุฉ ุจุงูููุชุฌ

---

## ๐ ููุงุญุธุงุช ุฎุชุงููุฉ

ูุฐุง ุงูููู ูู **ุงูุฏููู ุงูุนููู** ูุชุดุบูู ุงููุดุฑูุน.

* **ุงููุฑุฌุนูุฉ:** ุฑุงุฌุน `docs/index.md` ููุนุฑูุฉ ูุฑููุฉ ุงููุซุงุฆู.
* **ูุถ ุงููุฒุงุนุงุช:** `docs/PROJECT_CANONICAL_CONTEXT.md` ูู ุงููุตุฏุฑ ุงููุทูู ููุญูููุฉ.
* ุฃู ุทูุจ ููุฒุฉ โ ุฎุงุฑุฌ ูุทุงู ูุฐุง ุงูุฏููู

**ุงุนูู ุจุซูุฉ โ ุงููุธุงู ููุญููู ๐**

---
