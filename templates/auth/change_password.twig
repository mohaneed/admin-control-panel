{% extends "layout.twig" %}

{% block content %}
    <main class="flex justify-center bg-gray-50 h-[100vh] w-[100vw]">
        <img
                src="{{ asset('assets/images/login-bg.webp') }}"
                class="w-full h-[100vh] absolute top-0 left-0 z-[-1] opacity-100 sm:opacity-25 object-cover object-center"
                alt="bg"
        >

        <div class="w-full max-w-6xl px-4 z-[1]">
            <div class="flex justify-center mt-4 mb-6">
                <div class="w-full grid grid-cols-1 md:grid-cols-2 gap-4">

                    <!-- Left Image -->
                    <div class="flex justify-center hidden sm:block h-full">
                        <div class="bg-white shadow-lg rounded-md p-4 flex items-center justify-center">
                            <img
                                    class="w-[700px] object-cover object-center rounded-md"
                                    src="{{ asset('assets/images/login_model.webp') }}"
                                    alt="change-password-model"
                            >
                        </div>
                    </div>

                    <!-- Right Form -->
                    <div>
                        <div class="bg-white shadow-lg rounded-lg md:p-6 sm:p-4 h-full">
                            <div class="flex flex-col items-center justify-center h-full md:px-10 sm:p-4 p-3">

                                <!-- Header -->
                                <div class="text-center mb-10 flex flex-col items-center">
                                    <h2 class="text-2xl font-normal font-[Ubuntu] mb-2 capitalize">
                                        Change Your Password
                                    </h2>
                                    <p class="text-gray-600 text-sm capitalize tracking-wider font-normal">
                                        You must change your password before continuing
                                    </p>
                                </div>

                                <!-- Error -->
                                {% if error %}
                                    <div class="text-red-500 text-sm mb-4 w-full border border-red-500 p-2 rounded-md bg-red-100/50 flex items-center gap-2">
                                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                             stroke-width="1.5" stroke="currentColor"
                                             class="size-5 stroke-2 text-red-500">
                                            <path stroke-linecap="round" stroke-linejoin="round"
                                                  d="M12 9v3.75m9-.75a9 9 0 1 1-18 0
                                                 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"/>
                                        </svg>
                                        {{ error }}
                                    </div>
                                {% endif %}

                                <!-- Form -->
                                <form method="post" action="/auth/change-password" class="w-full">

                                    <input type="hidden" name="email" value="{{ email }}">

                                    <!-- Current Password -->
                                    <div class="flex flex-col gap-1 mb-4">
                                        <label class="form-label block mb-1 font-medium">
                                            Current Password <span class="text-red-500">*</span>
                                        </label>
                                        <input
                                                type="password"
                                                name="current_password"
                                                required
                                                class="w-full border border-gray-300 rounded px-3 py-2
                                               focus:outline-none focus:ring focus:ring-blue-500"
                                                placeholder="Enter your current password"
                                        >
                                    </div>

                                    <!-- New Password -->
                                    <div class="flex flex-col gap-1 mb-6">
                                        <label class="form-label block mb-1 font-medium">
                                            New Password <span class="text-red-500">*</span>
                                        </label>
                                        <input
                                                type="password"
                                                name="new_password"
                                                required
                                                class="w-full border border-gray-300 rounded px-3 py-2
                                               focus:outline-none focus:ring focus:ring-blue-500"
                                                placeholder="Enter your new password"
                                        >
                                    </div>

                                    <!-- Submit -->
                                    <button
                                            class="w-full bg-blue-500 text-white py-2 rounded
                                           hover:bg-blue-600 transition duration-200
                                           cursor-pointer font-[Ubuntu]"
                                            type="submit"
                                    >
                                        Change Password
                                    </button>

                                </form>

                                <!-- Footer Hint -->
                                <p class="text-gray-500 text-xs mt-6 text-center">
                                    After changing your password, you will be asked to log in again.
                                </p>

                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </main>
{% endblock %}
