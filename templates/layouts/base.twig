<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>
			{% block title %}
				Admin Panel
			{% endblock %}
		</title>
		<script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Roboto:ital,wght@0,100..900;1,100..900&family=Ubuntu:ital,wght@0,300;0,400;0,500;0,700;1,300;1,400;1,500;1,700&display=swap" rel="stylesheet">
		<link rel="stylesheet" href="{{ asset_base_url }}assets/css/style.css">

	</head>
	<style>
		.sidebar.collapsed ul li a:hover {
			position: relative;
			span {
				position: absolute;
				display: block;
				top: 0;
				left: 138%;
				background: white;
				width: fit-content;
				padding: 7px 20px;
				border: 1px solid #80808024;
				border-left-width: 1px;
				border-left-style: solid;
				border-left-color: rgba(128, 128, 128, 0.14);
				border-top-right-radius: 9px;
				border-bottom-right-radius: 9px;
				border-left: none;
			}

		}
	</style>


	<body class="bg-blue-50/15 flex flex-col min-h-screen ">
		<header class="header-section fixed top-0  right-0 z-[11111] w-[82%] [&.collapsed]:w-[95%]  max-w-[calc(100%-50px)] bg-white h-16 px-4 shadow-blue-200/40 shadow-sm  mb-5 transition-all duration-300 flex items-center justify-between">
			<div class="flex w-[40%] items-center">
				<span class="p-1  mr-3 rounded-md flex items-center justify-center cursor-pointer border border-gray-100">
					<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewbox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6 cursor-pointer m-[2px] stroke-gray-500" onclick="toggleSidebar()">
						<path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12H12m-8.25 5.25h16.5"/>
					</svg>
				</span>

				<input type="search" placeholder="Search or type command..." aria-label="Search" class="border border-gray-100 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-main/50 text-sm w-full"/>
			</div>
			<div>
				<form method="post" action="/logout" class="m-0">


					<button type="submit" class="bg-white border border-gray-100 py-1 px-2 shadow-sm rounded font-medium">
						<svg class="w-6 h-6 text-gray-500 cursor-pointer " aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24">
							<path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H8m12 0-4 4m4-4-4-4M9 4H7a3 3 0 0 0-3 3v10a3 3 0 0 0 3 3h2"/>
						</svg>
					</button>
				</form>
			</div>
		</header>
		<!-- Alert Container -->
		<div id="alert-container" class="absolute top-0 left-0 z-99999"></div>

		<nav class="sidebar fixed top-0 left-0 h-full w-[18%] bg-white text-main flex flex-col py-5 transition-[width] transition-all duration-300 shadow-md z-[1111] [&.collapsed]:w-[5%] [&.collapsed_.li-text]:hidden [&.collapsed_.arrow-icon]:hidden [&.collapsed_.logo]:text-base min-w-[50px] ">
			<div class="logo text-center text-xl font-bold whitespace-nowrap flex items-center justify-center gap-2">
				<img src="{{ asset_base_url }}assets/images/logo-small.png" alt="logo" class="w-12 h-12 mb-[-10px]  mr-2 ">
				<span>MyApp</span>
				<hr class="mt-6 mb-5 border-gray-200"/>
			</div>

			<ul class="space-y-2 px-4 mt-5">
				{% for item in nav_items %}
					<li>
						<a href="{{ item.path }}" class="flex items-center justify-start gap-2 text-gray-900 hover:bg-gray-100 p-2 rounded-md hover:[>span]:text-blue-600">
							{{ item.icon|raw }}
							<span>{{ item.title }}</span>
						</a>
					</li>
				{% endfor %}
			</ul>
		</nav>

		<main class="page-content flex-1 p-6  sm:p-6 mt-12 text-gray-600 w-[82%] [&.collapsed]:w-[92%] sm:[&.collapsed]:w-[95%] ml-[18%] [&.collapsed]:ml-[8%] sm:[&.collapsed]:ml-[5%] transition-all duration-300"> {% block content %}{% endblock %}
			</main>

			<footer class="bg-white text-center py-4 text-gray-600 border-t border-gray-100">
				&copy;
				{{ "now"|date("Y") }} MAATIFY |
				Admin Control Panel
			</footer>

			{% block scripts %}{% endblock %}


			<script>

				function toggleSidebar() {
document.querySelector(".sidebar").classList.toggle("collapsed");
document.querySelector(".page-content").classList.toggle("collapsed");
document.querySelector(".header-section ").classList.toggle("collapsed");
document.querySelector(".logo span").classList.toggle("hidden");

if (document.querySelector(".sidebar").classList.contains("collapsed")) {
document.querySelector(".sidebar").querySelectorAll("a").forEach(link => {
link.querySelector("span").classList.add("hidden");
});
} else {
document.querySelector(".sidebar").querySelectorAll("a").forEach(link => {
link.querySelector("span").classList.remove("hidden");
});
}

}


function setActiveNavItem() {
const currentPath = window.location.pathname;

const navLinks = document.querySelectorAll('nav a');

navLinks.forEach(link => {
link.classList.remove('bg-blue-300/40');
});

navLinks.forEach(link => {
const linkPath = link.getAttribute('href');

if (linkPath === currentPath) {
link.classList.add('bg-blue-300/40');
} else if (currentPath.startsWith(linkPath) && linkPath !== '/') {
link.classList.add('bg-blue-300/40');
}
});
}

document.addEventListener('DOMContentLoaded', setActiveNavItem);
			</script>
		</body>
	</html>
