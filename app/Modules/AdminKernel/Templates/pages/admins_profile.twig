{% extends "layouts/base.twig" %}

{% block title %}Admin Profile -
	{{ admin.display_name ?? 'N/A' }}
{% endblock %}

{% block content %}
	<!-- Page Header with Breadcrumb -->
		<div class="flex flex-wrap items-center justify-between gap-3 mb-6 mt-4 mx-2">
			<h2 class="text-xl font-semibold text-gray-800 dark:text-gray-100">Admin Profile</h2>
			<nav>
				<ol class="flex items-center gap-1.5">
					<li>
						<a class="inline-flex items-center gap-1.5 text-sm text-gray-500 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors" href="{{ ui.adminUrl }}dashboard">
							Home
							<svg class="stroke-current" width="17" height="16" viewbox="0 0 17 16" fill="none" xmlns="http://www.w3.org/2000/svg">
								<path d="M6.0765 12.667L10.2432 8.50033L6.0765 4.33366" stroke="" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"></path>
							</svg>
						</a>
					</li>
					<li>
						<a class="inline-flex items-center gap-1.5 text-sm text-gray-500 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors" href="{{ ui.adminUrl }}admins">
							Admins
							<svg class="stroke-current" width="17" height="16" viewbox="0 0 17 16" fill="none" xmlns="http://www.w3.org/2000/svg">
								<path d="M6.0765 12.667L10.2432 8.50033L6.0765 4.33366" stroke="" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"></path>
							</svg>
						</a>
					</li>
					<li class="text-sm text-gray-800 dark:text-gray-200">Profile</li>
				</ol>
			</nav>
		</div>

	<div class="mt-2 p-9 bg-white dark:bg-gray-800 rounded-2xl shadow dark:shadow-gray-900/50 border border-gray-200 dark:border-gray-700">

		<!-- Main Content -->
		<div class="max-w-6xl mx-auto">
			<h2 class="text-lg font-semibold text-gray-800 dark:text-gray-100 mb-3 mt-[-14px] font-[Poppins]"> Profile</h2>

			<!-- Admin Header Card -->
			<div class="bg-white dark:bg-gray-700 rounded-2xl shadow dark:shadow-gray-900/50 border border-gray-200 dark:border-gray-600 mb-6 overflow-hidden">
				<div class="px-6 py-6">
					<div
						class="flex items-center justify-between gap-4">
						<!-- Admin Info -->
						<div
							class="flex items-center gap-4">
							<!-- Avatar -->
							<div class="flex items-center justify-center w-20 h-20 bg-gray-50 dark:bg-gray-800 rounded-full">
								<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewbox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-10 h-10 text-gray-500 dark:text-gray-400">
									<path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"/>
								</svg>
							</div>

							<!-- Name and Status -->
							<div>
								<h3 class="text-2xl font-bold text-gray-800 dark:text-gray-100 mb-1 font-[Roboto]">
									{{ admin.display_name ?? 'N/A' }}
								</h3>
								<div class="flex items-center gap-2">
									<span class="text-sm text-gray-500 dark:text-gray-400">Admin ID:</span>
									<code class="text-sm font-mono text-gray-700 dark:text-gray-300">{{ admin.id }}</code>
								</div>
							</div>
						</div>

						<!-- Right Side: Status Badge and Edit Button -->
						<div
							class="flex items-center gap-3">
							<!-- Status Badge -->
							{# <div>
								{% set status = admin.status|upper %}
								{% if status == 'ACTIVE' %}
									<span class="bg-green-600 text-white px-4 py-2 lowercase  rounded-lg text-sm font-medium   tracking-wide">
										{{ admin.status }}
									</span>
								{% elseif status == 'SUSPENDED' %}
									<span class="bg-orange-600 text-white px-4 py-2 lowercase  rounded-lg text-sm font-medium   tracking-wide">
										{{ admin.status }}
									</span>
								{% elseif status == 'DISABLED' %}
									<span class="bg-red-600 text-white px-4 py-2 lowercase  rounded-lg text-sm font-medium   tracking-wide">
										{{ admin.status }}
									</span>
								{% else %}
									<span class="bg-gray-600 text-white px-4 py-2 lowercase  rounded-lg text-sm font-medium   tracking-wide">
										{{ admin.status ?? 'Unknown' }}
									</span>
								{% endif %}
							</div> #}

							{# ✅ Show "Edit Profile" button only if user has can_edit capability #}
							{% if capabilities.can_edit ?? false %}
								<!-- Edit Profile Button -->
								<a href="{{ ui.adminUrl }}admins/{{ admin.id }}/profile/edit" class="inline-flex items-center gap-2 px-4 py-2 bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200 text-sm font-medium rounded-2xl border border-gray-200 dark:border-gray-600 hover:bg-gray-50/70 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-all duration-200 shadow-sm hover:shadow-md">
									<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-4">
  <path stroke-linecap="round" stroke-linejoin="round" d="m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125" />
</svg>

									<span>Edit</span>
								</a>
							{% endif %}
						</div>
					</div>
				</div>
			</div>

			<!-- Core Information Card -->
			<div class="bg-white dark:bg-gray-700 rounded-2xl shadow dark:shadow-gray-900/50 border border-gray-200 dark:border-gray-600 mb-6">
				<div class="px-6  py-3 ">
					<div class="flex items-center gap-3">
						
						<h3 class="text-lg font-semibold text-gray-900 dark:text-gray-100">Core Information</h3>
					</div>
				</div>

				<div class="px-6 py-6 pt-3">
					<div
						class="grid grid-cols-1 md:grid-cols-2 gap-6">

						<!-- Display Name -->
						<div class="">
							<label class="block text-xs font-medium text-gray-500 dark:text-gray-400">Display Name</label>
							<div class="text-lg text-gray-700 dark:text-gray-300 font-medium">
								{{ admin.display_name ?? '—' }}
							</div>
						</div>

						<!-- Status -->
						<div class="">
							<label class="block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1">Status</label>
							<div>
								{% set status = admin.status|upper %}
								{% if status == 'ACTIVE' %}
									<span class="bg-green-600 text-white px-4 py-2 lowercase  rounded-lg text-xs font-medium   tracking-wide">
										{{ admin.status }}
									</span>
								{% elseif status == 'SUSPENDED' %}
									<span class="bg-orange-600 text-white px-4 py-2 lowercase  rounded-lg text-sm font-medium   tracking-wide">
										{{ admin.status }}
									</span>
								{% elseif status == 'DISABLED' %}
									<span class="bg-red-600 text-white px-4 py-2 lowercase  rounded-lg text-sm font-medium   tracking-wide">
										{{ admin.status }}
									</span>
								{% else %}
									<span class="bg-gray-600 text-white px-4 py-2 lowercase  rounded-lg text-sm font-medium   tracking-wide">
										{{ admin.status ?? 'Unknown' }}
									</span>
								{% endif %}
							</div>
						</div>

						<!-- Created At -->
						<div class="">
							<label class="block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1">Created At</label>
							<div class="text-base text-gray-700 dark:text-gray-300">
								{{ admin.created_at ?? '—' }}
							</div>
						</div>

						<!-- Email with Verification Badge -->
						<div class="">
							<label class="block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1">Email</label>
							<div class="flex items-center gap-2">
								<span class="text-base text-gray-700 dark:text-gray-300 font-mono">
									{{ email.masked_address ?? '—' }}
								</span>

								{% if email.verification_status is defined and email.verification_status is not null %}
									{% if email.verification_status == 'verified' %}
										<span class="inline-flex items-center gap-1 bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300 text-xs px-2 py-1 rounded-full font-medium">
											<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewbox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-3.5 h-3.5">
												<path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"/>
											</svg>
											Verified
										</span>
									{% else %}
										<span class="inline-flex items-center gap-1 bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-300 text-xs px-2 py-1 rounded-full font-medium">
											<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewbox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-3.5 h-3.5">
												<path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"/>
											</svg>
											{{ email.verification_status|capitalize }}
										</span>
									{% endif %}
								{% endif %}
							</div>
						</div>

					</div>
				</div>
			</div>

			<!-- Navigation Grid -->
			<div
				class="grid grid-cols-1 md:grid-cols-3 gap-6">
				{# ✅ Show "Emails" Section only if user has can_view_emails capability #}
				{% if capabilities.can_view_emails ?? false %}
					<!-- Account Section -->
					<div class="bg-white dark:bg-gray-700 rounded-2xl shadow dark:shadow-gray-900/50 border border-gray-200 dark:border-gray-600 overflow-hidden">
						<div class="px-6 py-4 border-b border-gray-200 dark:border-gray-600">
							<div class="flex items-center gap-3">
								<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewbox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 text-gray-600 dark:text-gray-400">
									<path stroke-linecap="round" stroke-linejoin="round" d="M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"/>
								</svg>
								<h4 class="text-base font-semibold text-gray-800 dark:text-gray-100">Account</h4>
							</div>
						</div>  

						<div class="px-6 py-4">
							<ul class="space-y-3">
								<li>
									<a href="{{ ui.adminUrl }}admins/{{ admin.id }}/emails" class="flex items-center justify-between group hover:bg-blue-50 dark:hover:bg-blue-900/30 px-3 py-2 rounded-lg transition-colors duration-200">
										<span class="text-sm text-gray-700 dark:text-gray-300 group-hover:text-blue-600 dark:group-hover:text-blue-400 font-medium">Emails</span>
										<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewbox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 text-gray-400 group-hover:text-blue-600">
											<path stroke-linecap="round" stroke-linejoin="round" d="m8.25 4.5 7.5 7.5-7.5 7.5"/>
										</svg>
									</a>
								</li>
							</ul>
						</div>
					</div>
				{% endif %}

				{# ✅ Show "Sessions" Section only if user has can_view_sessions capability #}
				{% if capabilities.can_view_sessions ?? false %}
					<!-- Security Section -->
					<div class="bg-white dark:bg-gray-700 rounded-2xl shadow dark:shadow-gray-900/50 border border-gray-200 dark:border-gray-600 overflow-hidden">
						<div class="px-6 py-4 border-b border-gray-200 dark:border-gray-600">
							<div class="flex items-center gap-3">
								<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewbox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 text-gray-600 dark:text-gray-400">
									<path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75 11.25 15 15 9.75m-3-7.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285Z"/>
								</svg>
								<h4 class="text-base font-semibold text-gray-800 dark:text-gray-100">Security</h4>
							</div>
						</div>

						<div class="px-6 py-4">
							<ul class="space-y-3">
								<li>
									<a href="{{ ui.adminUrl }}admins/{{ admin.id }}/sessions" class="flex items-center justify-between group hover:bg-orange-50 dark:hover:bg-orange-900/30 px-3 py-2 rounded-lg transition-colors duration-200">
										<span class="text-sm text-gray-700 dark:text-gray-300 group-hover:text-orange-600 dark:group-hover:text-orange-400 font-medium">Sessions</span>
										<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewbox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 text-gray-400 group-hover:text-orange-600">
											<path stroke-linecap="round" stroke-linejoin="round" d="m8.25 4.5 7.5 7.5-7.5 7.5"/>
										</svg>
									</a>
								</li>
							</ul>
						</div>
					</div>
				{% endif %}

				{# ✅ Show "Activity" Section only if user has can_view_notifications capability #}
				{% if capabilities.can_view_notifications ?? false %}
					<!-- Activity Section -->
					<div class="bg-white dark:bg-gray-700 rounded-2xl shadow dark:shadow-gray-900/50 border border-gray-200 dark:border-gray-600 overflow-hidden  ">
						<div class="px-6 py-4 border-b border-gray-200 dark:border-gray-600">
							<div class="flex items-center gap-3">
								<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewbox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 text-gray-600 dark:text-gray-400">
									<path stroke-linecap="round" stroke-linejoin="round" d="M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0"/>
								</svg>
								<h4 class="text-base font-semibold text-gray-800 dark:text-gray-100">Activity</h4>
							</div>
						</div>

						<div class="px-6 py-4">
							<ul class="space-y-3">
								<li>
									<a href="{{ ui.adminUrl }}admins/{{ admin.id }}/notifications" class="flex items-center justify-between group hover:bg-sky-50 dark:hover:bg-sky-900/30 px-3 py-2 rounded-lg transition-colors duration-200">
										<span class="text-sm text-gray-700 dark:text-gray-300 group-hover:text-sky-600 dark:group-hover:text-sky-400 font-medium">Notifications</span>
										<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewbox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 text-gray-400 group-hover:text-sky-600">
											<path stroke-linecap="round" stroke-linejoin="round" d="m8.25 4.5 7.5 7.5-7.5 7.5"/>
										</svg>
									</a>
								</li>
							</ul>
						</div>
					</div>
				{% endif %}

			</div>
		</div>

		{# ✅ Show "Back to Admins List" Button only if user has can_view_admins capability #}
		{% if capabilities.can_view_admins ?? false %}
			<!-- Back Button -->
			<div class="mt-6">
				<a href="{{ ui.adminUrl }}admins" class="inline-flex items-center gap-2 px-6 py-3 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200 border border-gray-300 dark:border-gray-600 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-700 transition-all duration-200 shadow-sm">
					<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewbox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5">
						<path stroke-linecap="round" stroke-linejoin="round" d="M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"/>
					</svg>
					<span>Back to Admins List</span>
				</a>
			</div>
		{% endif %}

	</div>

{% endblock %}

{% block scripts %}
	<!-- Add any specific JavaScript for admin profile page if needed -->
	<script>
		document.addEventListener('DOMContentLoaded', () => {
console.log('Admin Profile Page Loaded');

// Add any interactive features here
});
	</script>
{% endblock %}
